function sendAjax(e,n,t,r){n=n||{},void 0===r&&(r="json"),$.ajax({type:"post",url:e,data:n,dataType:r,beforeSend:function(e){return e.setRequestHeader("X-CSRF-Token",$("meta[name='csrf-token']").attr("content"))},success:function(e){"function"==typeof t&&t(e)},error:function(e,n,t){alert("Не удалось выполнить запрос! Ошибка на сервере.")}})}function sendFiles(e,n,t,r){void 0===r&&(r="json"),$.ajax({url:e,type:"POST",data:n,cache:!1,dataType:r,processData:!1,contentType:!1,beforeSend:function(e){return e.setRequestHeader("X-CSRF-Token",$("meta[name='csrf-token']").attr("content"))},success:function(e,n,r){"function"==typeof t&&t(e)},error:function(e,n,t){alert("Не удалось выполнить запрос! Ошибка на сервере.")}})}function popup(e){var n='<div class="magpop mfp-with-anim">'+e+"</div>";$.magnificPopup.open({items:{src:n},type:"inline"})}function resetForm(e){$(e).trigger("reset"),$(e).find(".err-msg-block").remove(),$(e).find(".invalid").attr("title","").removeClass("invalid")}function applyFormValidate(e,n){for(var t in $(e).find(".invalid").attr("title","").removeClass("invalid"),n)$(e).find('[name="'+urldecode(t)+'"]').addClass("invalid").attr("title",urldecode(n[t].join(" ")));$(e).find(".invalid").eq(0).trigger("focus")}function urldecode(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}function validField(e){return e.val()?(e.removeClass("invalid").removeAttr("title"),!0):(e.addClass("invalid"),!1)}function validForm(e,n){var t=!0;for(var r in n){validField(e.find('[name="'+n[r]+'"]'))||(t=!1)}return!!t||(e.find(".invalid").eq(0).focus(),!1)}function sendCallback(e,n){n.preventDefault();var t=(e=$(e)).serialize(),r=$(e).attr("action");e.find(".err-msg-block").remove(),sendAjax(r,t,function(n){if(void 0!==n.errors){validForm(e,n.errors);var t=[];for(var r in n.errors)t.push(n.errors[r]);var i=t.join("<br />");e.find(".f_tit").after('<div class="err-msg-block">'+i+"</div>")}else resetForm(e),popup("Спасибо за заявку, в ближайшее время мы вам ответим!")})}function moreNews(e){var n=$(e).data("url"),t=$(".js_more_lnk"),r=$(".js_wait");t.hide(),r.show(),sendAjax(n,{},function(e){r.hide(),void 0!==e.items&&$.each(e.items,function(e,n){var t=createElementFromHTML(n);$bricklayer.append(t)}),void 0!==e.next_count&&e.next_count>0&&(t.data("url",e.next_page),t.find("span").text(e.next_count),t.show())})}function createElementFromHTML(e){var n=document.createElement("div");return n.innerHTML=e.trim(),n.firstChild}
